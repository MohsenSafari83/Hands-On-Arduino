#  I2C Communication Protocol in Arduino (TWI)

This directory covers the **Inter-Integrated Circuit (I2C)** protocol, also known as **Two-Wire Interface (TWI)**, and its implementation in Arduino using the **Wire library**. I2C is a widely used serial communication standard in microcontrollers and embedded systems.

## ðŸ’¡ I2C Protocol Overview

I2C allows communication between one or more **Masters** (typically microcontrollers) and multiple **Slaves** (sensors, modules, etc.). A **Master** initiates communication and controls the **SCL** clock line, enabling control and monitoring between devices.

Arduino boards act as AVR microcontrollers, allowing you to connect two or more Arduino boards using I2C by designating one as the Master and the others as Slaves.

### How I2C Works: The Two Wires

I2C uses only two signal wires for communication between Masters and Slaves:

1.  **SDA (Serial Data):** The line used for transmitting and receiving data.
2.  **SCL (Serial Clock):** The line used for transmitting the clock pulse, which synchronizes the data transfer.

> **ðŸ“Œ Note on Arduino UNO Pins:**
> On the **Arduino UNO**, the **SDA** pin is **A4**, and the **SCL** pin is **A5**. For other boards, refer to their datasheets for I2C pin locations.
---
### Synchronization, Addressing, and Bus Structure

| Concept | Explanation |
| :--- | :--- |
| **Addressing** | Every Slave must have a **unique 7-bit address** (sometimes 10-bit). The Master calls out this address to select the target Slave. Masters **do not** require an address. |
| **Bus Structure** | Supports **Multi-Master / Multi-Slave** setups (up to $\approx 128$ Slaves). Only one Master can be active at a time. |
| **Start/Stop Condition** | **Start:** Master changes **SDA from HIGH to LOW** while **SCL is HIGH** (initiates transaction). **Stop:** Master changes **SDA from LOW to HIGH** while **SCL is HIGH** (terminates transaction). |
---

## âš™ï¸ Key Specifications and Features

The I2C protocol offers several distinct characteristics:

* **Speed:** It is **not the fastest** protocol (slower than SPI), but its speed is sufficient for most sensor and module interactions.
* **Distance:** Suitable for **short distances** (e.g., up to about 1 meter at $100\text{ KHz}$).
* **Synchronization:** It is a **Synchronous** communication protocol (it uses a shared clock line, SCL).
* **Data Transfer:** Data is sent **serially** (bit-by-bit).
* **Voltage:** Operates at $5\text{V}$ or $3.3\text{V}$.

### Master, Slave, and Addressing

* **Roles:** Devices connected to the I2C bus are designated as either **Master** (initiates and controls the bus) or **Slave** (responds to the Master).
* **Multi-Master / Multi-Slave:** The bus supports multiple Slaves connected to a single Master, and even multiple Masters controlling a single Slave. However, **only one Master can be active at any given moment**.
* **Addressing:** Each Slave must have a unique **7-bit address** (sometimes 10-bit). This allows approximately **128 Slave devices** to be connected to the bus. Masters **do not** require an address.
* **Synchronization:** Data transfer is synchronized by the clock line (**SCL**), which is generated by the active Master.

> **ðŸ’¡ Important: Pull-up Resistors**
> The two lines, **SDA** and **SCL**, **must be pulled up** in the circuit.
> * For high speeds (e.g., $400\text{ kbps}$), a resistance of **$2\text{ K}\Omega$** is often used.
> * For lower speeds (e.g., $100\text{ kbps}$), a resistance of **$10\text{ K}\Omega$** is common.

---

## The Arduino Wire Library

To work with I2C on Arduino, we use the built-in Arduino library called **Wire**. This library greatly simplifies the use of the I2C protocol through several helpful functions:

| Function | Role / Usage |
| :--- | :--- |
| **`Wire.begin()`** | Initializes the library and the I2C bus. **Sets the Arduino role** as Master or Slave. |
| **`Wire.requestFrom(address, count)`** | Used by the **Master** to request data transfer from a specific **Slave** (specified by `address`). `count` is the number of bytes requested. |
| **`Wire.beginTransmission(address)`** | Used by the **Master** to initiate communication with a specific Slave before sending data. |
| **`Wire.endTransmission()`** | Terminates the transmission started by `Wire.beginTransmission()`. |
| **`Wire.write(data)`** | Used by both Master and Slave to send (write) data to the I2C bus. |
| **`Wire.available()`** | Used by both Master and Slave to calculate the number of bytes available for reading (using `Wire.read()`). |
| **`Wire.read()`** | Used by both Master and Slave to read a single byte of data from the I2C bus. |
| **`Wire.setClock(frequency)`** | Used by the **Master** to set the SCL clock frequency (e.g., $100000\text{ Hz}$ or $400000\text{ Hz}$). |
| **`Wire.onReceive(handler)`** | Defined on the **Slave** side. This function is called automatically when data is received from the Master. |
| **`Wire.onRequest(handler)`** | Defined on the **Slave** side. This function is called automatically when the Master requests data from the Slave. |
